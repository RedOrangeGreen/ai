<!DOCTYPE html>
<html>
  <head>
    <title>AI Generated Android VideoApp Stage 5: WebPageGrab</title>
  </head>
  <body>
    <h1>AI Generated Android VideoApp Stage 5: WebPageGrab</h1>
    <section>
      <h2><b>Prepare</b></h2>
      <p>Using Android Studio Jellyfish or compatible</p>
      <p>Generate a project template using Projects | New Project | Empty Activity</p>
      <p>Make the following additions to app/manifests/AndroidManifest.xml</br>
         &lt;uses-permission android:name="android.permission.INTERNET" /><br>
         &lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /></p>
      <p>Make the following additions to Gradle Scripts/build.gradle.kts (Module :app)</br>
         implementation("androidx.compose.material3:material3:1.2.1")</br>
         implementation("androidx.compose.ui:ui:1.6.7")</br>
         implementation("androidx.lifecycle:lifecycle-viewmodel-compose:2.7.0")</br>
         implementation("androidx.lifecycle:lifecycle-viewmodel-ktx:2.7.0")</br>
         implementation("androidx.media3:media3-exoplayer:1.3.1")</br>
         implementation("androidx.media3:media3-exoplayer-hls:1.3.1")</br>
         implementation("androidx.media3:media3-ui:1.3.1")</br>
         implementation("com.squareup.okhttp3:okhttp:4.10.0")</br>
         implementation("io.coil-kt:coil:2.2.2")</br>
         implementation("io.coil-kt:coil-compose:2.2.2")</p>
      <p>Copy'n'paste in previously AI generated code from https://redorangegreen.github.io/ai/androidvideoimages/code/index.html</br>
         Change the MainActivity class to</br>
<pre>
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            MyApplicationTheme {
                Scaffold(
                    topBar = {},
                    bottomBar = {},
                    floatingActionButton = {},
                    modifier = Modifier.fillMaxSize()) { innerPadding ->
                    Column(
                        modifier = Modifier.padding(innerPadding),
                    ) {
                        MainScreen()
                    }
                }
            }
        }
    }
}
</pre>
    </section>
    <section>
      <h2><b>AI Coding Using Perplexity.AI (Tidy Code As Appropriate After Each Step)</b></h2>
      <p>Enhance the following code with 3 very simple "Play", "Settings" and "About" text buttons in a new BottomAppBar in the bottomBar...&lt;copy in the MainActivity class></p>
      <p>Enhance so that when the "Play" text button is clicked mainViewModel.currentScreen is changed to Screen.Mark, when the "Settings" text button is clicked mainViewModel.currentScreen is changed to Screen.Sue, when the "About" text button is clicked mainViewModel.currentScreen is changed to Screen.Jimmy</p>
      <p>Remove the text and button from the top of the following screen...&lt;copy in MarkScreen></p>
      <p>Rather than initialise with data, show how to initiialise channels empty in the following using a mutableStateListOf...&lt;copy in MainViewModel></p>
      <p>Add a location field to the following class...&lt;copy in Channel></p>
      <p>Enhance the following to also output the location field in selectedChannel...Text("ID: ${selectedChannel.value?.id}\nName: ${selectedChannel.value?.name}")</p>	
      <p>In the following screen change 'text = "Sue"' to 'text = "Settings"' and remove the 'Go to " button ...&lt;copy in SueScreen></p>
      <p>In the following screen change 'text = "Jimmy"' to 'text = "About"' and remove all buttons ...&lt;copy in JimmyScreen></p>
      <p>Using kotlin/Jetpack compose/material3 create a function (not a composable function) called “getChannels” which gets the contents of url https://iptv-org.github.io/iptv/index.m3u using okhttp as a string then with the string returned for each line starting “#EXTINF” extracts tvg-id as “name”, tvg-logo as “image” and the following line as “location” then adds these elements to a new array of a Channel structure which also has an incrementing field id in order id, image, name, location then finally returns the array. Don't use an excepton handler just conditional checks. Don't use JSON.</p> 
      <p>Show how to safely call initialise channels defined in the following viewModel in a composable function by calling getChannels() using an IO displatcher...&lt;copy in MainViewModel></p>
    </section>
    <section>
      <h2><b>Manual Edits</b></h2>
      <p>Jimmy -> About</p>
      <p>Sue -> Settings</p>
      <p>Mark -> Play</p> 
      <p>Initial message -> AI Generated Video Player</p> 
      <p>Increment -> Increment Count</p>       
    </section>
  </body>
</html>
